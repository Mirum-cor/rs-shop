<div class="container">
  <h2>Корзина</h2>
  <div
    class="cart-goods-wrapper"
    *ngIf="(goodsInCart$ | async)?.length; else noGoodsInCart"
  >
    <table>
      <thead>
        <th class="name">Название</th>
        <th class="image">Фото</th>
        <th class="description">Описание</th>
        <th class="price">Цена</th>
        <th class="amount">Количество</th>
        <th class="product-total">Сумма</th>
        <th class="delivery">Доставка</th>
        <th class="remove">Удалить</th>
      </thead>
      <tbody *ngFor="let product of goodsInCart$ | async">
        <tr id="{{ product.id }}">
          <td class="name">
            <a [routerLink]="['/product', product.id]">{{ product.name }}</a>
          </td>
          <td class="image">
            <img src="{{ product.imageUrls[0] }}" alt="Фото товара" />
          </td>
          <td class="description">
            {{ product.description | slice: 0:100 }}...
          </td>
          <td class="price">{{ product.price | number: "1.2" }} руб.</td>
          <td class="amount">
            <span class="less" (click)="addLessProduct($event)">-</span>
            <span class="current-amount">1</span>
            <span class="more" (click)="addMoreProduct($event)">+</span>
          </td>
          <td class="product-total"></td>
          <td class="delivery">сегодня</td>
          <td class="remove"><span (click)="removeFromCart($event)"></span></td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="7">Итого: <span #total></span></td>
        </tr>
      </tfoot>
    </table>
    <form>
      <label for="userName">ФИО</label>
      <input
        type="text"
        name="userName"
        id="userName"
        placeholder="Введите Ваше имя"
        required
        minlength="3"
        maxlength="50"
        (blur)="isNameValid($event)"
        #userName
      />
      <label for="address">Адрес доставки</label>
      <input
        type="text"
        name="address"
        id="address"
        placeholder="Введите адрес"
        required
        minlength="3"
        maxlength="250"
        (blur)="isAddressValid($event)"
        #address
      />
      <label for="tel">Номер телефона</label>
      <input
        type="tel"
        name="tel"
        id="tel"
        placeholder="+375 (XX) XXX-XX-XX"
        required
        (blur)="isTelValid($event)"
        #tel
      />
      <label for="name">Желаемое время доставки</label>
      <input
        type="date"
        name="date"
        id="date"
        required
        (blur)="isDateValid($event)"
        #date
      />
      <input
        type="time"
        name="time"
        id="time"
        required
        (blur)="isTimeValid($event)"
        #time
      />
      <label for="comment">Комментарий к заказу</label>
      <textarea name="comment" id="comment" maxlength="250" #comment></textarea>
      <input type="submit" value="Заказать" (click)="sendOrder($event)" />
      <h3 class="order-sent" #orderSent>Заказ отправлен!</h3>
    </form>
  </div>
  <ng-template #noGoodsInCart>
    <p class="no-favorites">У Вас пока нет товаров в корзине</p>
  </ng-template>
</div>
